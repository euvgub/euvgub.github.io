<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><title>Функции получения значений таблиц «Клиентский портфель»  и «Купить/Продать»</title>
<META name=GENERATOR content="MSHTML 8.00.6001.18812">
<META content="text/html; charset=Windows-1251" http-equiv=Content-Type>

<STYLE type=text/css>

ADDRESS {font-style:normal;  padding-left: 20px; margin: 0px 0px 25pt 5pt; font-size: 9pt; color:#000000; font-style:normal; font-weight: normal; display:list-item; list-style-type:none; list-style-position: outside; list-style-image:url('template/icon-popup.gif');}

ADDRESS P {font-style:normal;  padding-left: 20px; margin: 0px 0px 5pt -15pt; font-size: 9pt; color:#000000; font-style:normal; font-weight: normal; display:list-item; list-style-type:none; list-style-position: outside; list-style-image:url('template/icon-popup.gif');}

MENU { font-size: 12pt; font-family:Verdana;  line-height:100%; margin:0px 0px 0px 20pt; list-style-type:none; list-style-position: outside; list-style-image:url('template/blt-link_black.gif'); }

BODY {font-family: Arial; font-size: 12pt; color:#000000; background-color: #fbfbfb; line-height: 1.3; margin:0pt 5pt 10pt 5pt;}

A {color: #16A9D3;}
P  {font-family:Arial; font-size:12pt; margin-top:0px; margin-bottom:12pt;}

IMG { margin:0pt 0pt 0pt auto; }

UL { font-family: Arial; font-size: 12pt; margin:12px 0px 12px 20px; list-style-type:disc; list-style-image:url('template/blt-li.gif'); } 
OL {font-family: Arial; font-size: 12pt; font-weight: bold; margin-top:12pt; margin-bottom:6pt; margin-left:20pt; type: bold;}
LI { margin-bottom: 8px; }
LI OL { margin-left: 25px; }
LI UL { margin-left: 25px; list-style-image:url('template/blt-link_black.gif'); }

SPAN {font-weight: normal;}

DD OL { font:12pt Verdana; font-style:normal; font-weight: bold; margin-left: 35px; }

H1 { font-size: 28pt; font-family:Verdana; color:#000000; font-style:normal; line-height:110%; margin-top:20pt; margin-bottom:26pt; text-decoration:none; font-weight: bold; margin-right:auto; margin-left:auto;}
H2 { font-size: 20pt; font-family:Verdana; color:#000000; font-style:normal; line-height:110%; margin-top:20pt; margin-bottom:6pt; text-decoration:none; font-weight: bold; margin-left:auto; padding: 0.5ex 0; }
H3 { font-size: 14pt; font-family:Verdana; color:#000000; font-style:normal; line-height:95%; margin-top:20pt; margin-bottom:6pt; margin-left: auto;}
H4 { font-size: 11pt; font-family:Verdana; color:#000000; font-style:normal; line-height:95%; margin-top:16pt; margin-bottom:6pt; margin-left: auto;}

TABLE { border-collapse: collapse; margin-bottom:20pt; }
TH { font-size: 10pt; border-top: none; border-bottom:#000000 3px solid; padding:15pt 5pt 5px 0px; color:#000000; font-family:Verdana; font-style:normal; font-weight: bold; text-align:left; }
TD { font-size:10pt; border-top: 0pt; font-family:Arial; border-bottom:#000000 1px solid; padding:4pt 5px 12pt 0px;  line-height:120%; }
TD P {font-family: Arial; font-size: 10pt; margin-top:6pt;}
TD.plain 	{margin:0px 0px 0px 0px; border-top: 0px; border-bottom:0px; padding:0px 0px 0px 0px; font-size:100%; line-height:100%;}
TD.array	{ border: 1px solid #D4D4D4; text-align: center; width: 90px;}
TD.pic	{ padding:0px 0px 0px 0px; }
TD.line1          { background-color:#000000; }
TD.line2          { background-color:#000000; }
TD UL {font-family: Arial; font-size: 10pt; margin:0px 0px 0px 20px; line-height:120%;}
TD UL LI {font-family: Arial; font-size: 10pt; margin-bottom: 0px; list-style-image:url('template/blt-link_black.gif');}

TD H4	{line-height: 100%; margin-top: 8px; margin-bottom: 0px;}

DL	{ padding-left:35px; margin-left: 30px; margin-bottom: 35px;}
DD	{ padding-left:8px; color:#000000; margin: 8px 8px 8px 0px; font:12pt Verdana; font-style:normal; font-weight: bold; border-left: #000000 4px solid; margin-bottom:18pt; }
DD P	{font:12pt Verdana; font-style:normal; font-weight: bold; }

PRE	{ background-color:#F2F2F2; margin-left: 35px; margin-bottom: 20px; border-style:none; border-top-style: none; border-bottom-style: none; padding:8px 8px 8px 8px; font: 10pt Courier New; line-height:160%;}

.title {display: inline; background:#FbFbFb; margin-left: 0px; border-style:solid; border-color:#D4D4D4; border-width: 1px 1px 0px 4px; padding:8px 8px 6px 12px; color:#19A788; font-weight:bold;}
.hlt { background:#FFFFFF; margin-left: 0px; border-style:solid; border-color:#D4D4D4; border-width: 1px 2px 1px 4px; padding:15px 8px 15px 46px;}

STRONG { font-weight: bold;}
.logo	{ position: relative; top:-45px; float: right; width: 100px; margin:10px 10px 10px 10px; }
.mark	{ font: 10pt Verdana; color: #5EB28E; }
.defn	{ font: 15px Trebuchet MS; margin:12px 0px 12px 50px; }
.copyright {font: 12pt Trebuchet MS; font-style:normal; color:#A2A2A2; margin-top: 50px;}
.comment	{ font-size: 10pt; font-family: Verdana; }
</STYLE>

<meta name=GENERATOR content="MSHTML 8.00.6001.18812"></head>

<body aLink=#19a788 link=#007cae vLink=#8d4194>
<H1 style="MARGIN-TOP: 10pt">Функции получения значений таблиц «Клиентский портфель»  и «Купить/Продать»</H1>
<P><FONT size=2 face=Arial>
<MENU>
  <LI><A href="#subt1">GET_CLIENT_MARGINAL_PORTFOLIO_INFO</A> 
  <LI><A href="#subt3">GET_CLIENT_MARGINAL_PORTFOLIO_INFO_EX</A> 
  <LI><A href="#subt2">GET_CLIENT_MARGINAL_BUY_SELL_INFO</A>
  <LI><A href="#subt4">GET_CLIENT_MARGINAL_BUY_SELL_INFO_EX</A> </LI></MENU>

<P>&nbsp;</P>
<P>Функции предназначены для получения значений указанных таблиц. Значения этих 
таблиц вычисляются на рабочем месте клиента QUIK с периодичностью, установленной 
в настройках (пункт меню <STRONG>Система/Настройки/Основные настройки...</STRONG>,&nbsp;раздел «Торговля» 
/ «Клиентский портфель», флажок «Обновлять через каждые .. секунд»). </P>

<A name=subt1></A>
<H2>GET_CLIENT_MARGINAL_PORTFOLIO_INFO</H2>
<P>Функция возвращает ассоциативный массив (MAP) с параметрами таблицы <A 
href="ch7_10.html">Клиентский портфель</A>, соответствующих идентификатору 
участника торгов «firmid» и коду клиента «client_code».</P>
<P class=defn>MAP&nbsp;GET_CLIENT_MARGINAL_PORTFOLIO_INFO (STRING firmid, STRING 
client_code)</P>
<A name=subt5></A>
<H3>Параметры: </H3>
<P>
<TABLE>
  <TBODY>
  <TR>
    <TH>№</TH>
    <TH>Параметр</TH>
    <TH>Тип</TH>
    <TH>Описание</TH>
   <TH>Заголовок поля в таблице</TH></TR>
  <TR>
    <TD>1</TD>
    <TD>IS_LEVERAGE</TD>
    <TD>STRING (12)</TD>
    <TD>
      <P>
Признак использования схемы кредитования с контролем текущей стоимости активов. Возможные значения:
      <UL>
        <LI>«МЛ» – используется схема ведения позиции «по плечу», «плечо» рассчитано по значению Входящего лимита; 
        <LI>«МП» – используется схема ведения позиции «по плечу», «плечо» указано явным образом; 
        <LI>«МОП» – используется схема ведения позиции «лимит на открытую позицию»;
        <LI>«МД» – используется схема ведения позиции «по дисконтам»;
        <LI>&lt;пусто&gt; - используется схема ведения позиции «по лимитам»</LI></UL> </TD>
    <TD>Тип клиента</TD></TR>  

  <TR>
    <TD>2</TD>
    <TD>IN_ASSETS</TD>
    <TD>DOUBLE</TD>
    <TD>Оценка собственных средств клиента до начала торгов</TD>
    <TD>Вход. активы</TD></TR>

  <TR>
    <TD>3</TD>
    <TD>LEVERAGE</TD>
    <TD>DOUBLE</TD>
    <TD>Плечо. Если не было задано явно, то отношение Входящего лимита к 
      Входящим активам</TD>
    <TD>Плечо</TD></TR>
  <TR>
    <TD>4</TD>
    <TD>OPEN_LIMIT</TD>
    <TD>DOUBLE</TD>
    <TD>Оценка максимальной величины заемных средств до начала 
      торгов</TD><TD>Вход. лимит</TD></TR>
  <TR>
    <TD>5</TD>
    <TD>VAL_SHORT</TD>
    <TD>DOUBLE</TD>
    <TD>Оценка стоимости коротких позиций. Значение всегда 
      отрицательное</TD><TD>Шорты</TD></TR>
  <TR>
    <TD>6</TD>
    <TD>VAL_LONG</TD>
    <TD>DOUBLE</TD>
    <TD>Оценка стоимости длинных позиций</TD><TD>Лонги</TD></TR>
  <TR>
    <TD>7</TD>
    <TD>VAL_LONG_MARGIN</TD>
    <TD>DOUBLE</TD>
    <TD>Оценка стоимости длинных позиций по маржинальным инструментам, принимаемым 
      в обеспечение</TD><TD>Лонги МО</TD></TR>
  <TR>
    <TD>8</TD>
    <TD>VAL_LONG_ASSET</TD>
    <TD>DOUBLE</TD>
    <TD>Оценка стоимости длинных позиций по немаржинальным инструментам, 
      принимаемым в обеспечение</TD><TD>Лонги О</TD></TR>
  <TR>
    <TD>9</TD>
    <TD>ASSETS</TD>
    <TD>DOUBLE</TD>
    <TD>Оценка собственных средств клиента по текущим позициям и 
      ценам</TD><TD>Стоимость портфеля</TD></TR>
  <TR>
    <TD>10</TD>
    <TD>CUR_LEVERAGE</TD>
    <TD>DOUBLE</TD>
    <TD>Текущее плечо</TD><TD>Тек.плечо</TD></TR>
  <TR>
    <TD>11</TD>
    <TD>MARGIN</TD>
    <TD>DOUBLE</TD>
    <TD>Уровень маржи, в процентах</TD><TD>Ур. маржи</TD></TR>
  <TR>
    <TD>12</TD>
    <TD>LIM_ALL</TD>
    <TD>DOUBLE</TD>
    <TD>Текущая оценка максимальной величины заемных средств</TD><TD>Тек. лимит</TD></TR>
  <TR>
    <TD>13</TD>
    <TD>AV_LIM_ALL</TD>
    <TD>DOUBLE</TD>
    <TD>Оценка величины заемных средств, доступных для дальнейшего открытия 
      позиций</TD><TD>ДостТекЛимит</TD></TR>
  <TR>
    <TD>14</TD>
    <TD>LOCKED_BUY</TD>
    <TD>DOUBLE</TD>
    <TD>Оценка стоимости активов в заявках на покупку</TD><TD>Блок. покупка</TD></TR>
  <TR>
    <TD>15</TD>
    <TD>LOCKED_BUY_MARGIN</TD>
    <TD>DOUBLE</TD>
    <TD>Оценка стоимости активов в заявках на покупку маржинальных инструментов, 
      принимаемых в обеспечение</TD><TD>Блок. пок. маржин.</TD></TR>
  <TR>
    <TD>16</TD>
    <TD>LOCKED_BUY_ASSET</TD>
    <TD>DOUBLE</TD>
    <TD>Оценка стоимости активов в заявках на покупку немаржинальных инструментов, 
      принимаемых в обеспечение</TD><TD>Блок.пок. обесп.</TD></TR>
  <TR>
    <TD>17</TD>
    <TD>LOCKED_SELL</TD>
    <TD>DOUBLE</TD>
    <TD>Оценка стоимости активов в заявках на продажу маржинальных 
      инструментов</TD><TD>Блок. продажа</TD></TR>
  <TR>
    <TD>18</TD>
    <TD>LOCKED_VALUE_COEF</TD>
    <TD>DOUBLE</TD>
    <TD>Оценка стоимости активов в заявках на покупку немаржинальных 
      инструментов</TD><TD>Блок. пок. немарж.</TD></TR>
  <TR>
    <TD>19</TD>
    <TD>IN_ALL_ASSETS</TD>
    <TD>DOUBLE</TD>
    <TD>Оценка стоимости всех позиций клиента в ценах закрытия предыдущей 
      торговой сессии, включая позиции по немаржинальным 
      инструментам</TD><TD>ВходСредства</TD></TR>
  <TR>
    <TD>20</TD>
    <TD>ALL_ASSETS</TD>
    <TD>DOUBLE</TD>
    <TD>Текущая оценка стоимости всех позиций клиента</TD><TD>ТекСредства</TD></TR>
  <TR>
    <TD>21</TD>
    <TD>PROFIT_LOSS</TD>
    <TD>DOUBLE</TD>
    <TD>Абсолютная величина изменения стоимости всех позиций 
      клиента</TD><TD>Прибыль/убытки</TD></TR>
  <TR>
    <TD>22</TD>
    <TD>RATE_CHANGE</TD>
    <TD>DOUBLE</TD>
    <TD>Относительная величина изменения стоимости всех позиций 
      клиента</TD><TD>ПроцИзмен</TD></TR>
  <TR>
    <TD>23</TD>
    <TD>LIM_BUY</TD>
    <TD>DOUBLE</TD>
    <TD>Оценка денежных средств, доступных для покупки маржинальных 
      инструментов</TD><TD>На покупку</TD></TR>
  <TR>
    <TD>24</TD>
    <TD>LIM_SELL</TD>
    <TD>DOUBLE</TD>
    <TD>Оценка стоимости маржинальных инструментов, доступных для продажи</TD><TD>На       продажу</TD></TR>
  <TR>
    <TD>25</TD>
    <TD>LIM_NON_MARGIN</TD>
    <TD>DOUBLE</TD>
    <TD>Оценка денежных средств, доступных для покупки немаржинальных 
      инструментов</TD><TD>НаПокупНеМаржин</TD></TR>
  <TR>
    <TD>26</TD>
    <TD>LIM_BUY_ASSET</TD>
    <TD>DOUBLE</TD>
    <TD>Оценка денежных средств, доступных для покупки инструментов, принимаемых в 
      обеспечение</TD><TD>НаПокупОбесп</TD></TR>
<TR>
    <TD>27</TD>
    <TD>VAL_SHORT_NET</TD>
    <TD>DOUBLE</TD>
    <TD>Оценка стоимости коротких позиций. При расчете не используется коэффициент дисконтирования <SPAN                       class=mark>*</SPAN></TD><TD>Шорты (нетто)</TD></TR>
<TR>
    <TD>28</TD>
    <TD>VAL_ LONG_NET</TD>
    <TD>DOUBLE</TD>
    <TD>Оценка стоимости длинных позиций. При расчете не используется коэффициент дисконтирования <SPAN                       class=mark>*</SPAN></TD><TD>Лонги (нетто)</TD></TR>
  <TR>
    <TD>29</TD>
    <TD>TOTAL_MONEY_BAL</TD>
    <TD>DOUBLE</TD>
    <TD>Сумма остатков по денежным средствам по всем 
      позициям, без учета средств, заблокированных под исполнение обязательств, выраженная в выбранной валюте 
      расчета</TD><TD>Сумма ден. остатков</TD></TR>
  <TR>
    <TD>30</TD>
    <TD>TOTAL_LOCKED_MONEY</TD>
    <TD>DOUBLE</TD>
    <TD> Cумма заблокированных средств со всех 
      денежных&nbsp;позиций клиента, пересчитанная в валюту расчетов через кросс-курсы на 
      сервере</TD><TD> Суммарно заблок.</TD></TR>
  <TR>
    <TD>31</TD>
    <TD>HAIRCUTS</TD>
    <TD>DOUBLE</TD>
    <TD>Сумма дисконтов стоимости длинных (только по инструментам обеспечения) и коротких&nbsp;позиций по инструментам, дисконтов корреляции между инструментами, а также дисконтов на задолженности по валютам, не покрытые обеспечением по инструментам в этих же валютах</TD><TD>Сумма дисконтов</TD></TR>
  <TR>
    <TD>32</TD>
    <TD>ASSETS_WITHOUT_HC</TD>
    <TD>DOUBLE</TD>
    <TD>Суммарная величина денежных остатков, стоимости длинных позиций по инструментам обеспечения и стоимости коротких позиций, без учета дисконтирующих коэффициентов, без учета неттинга стоимости инструментов в рамках объединенной позиции по инструментам и без учета корреляции между инструментами</TD><TD>ТекАктБезДиск</TD></TR>
  <TR>
    <TD>33</TD>
    <TD>STATUS_COEF</TD>
    <TD>DOUBLE</TD>
    <TD>Отношение суммы дисконтов к текущим активам без учета 
      дисконтов</TD><TD>Статус счета</TD></TR>
  <TR>
    <TD>34</TD>
    <TD>VARMARGIN</TD>
    <TD>DOUBLE</TD>
    <TD>Текущая вариационная маржа по позициям клиента, по всем 
      инструментам</TD><TD>Вариац. маржа</TD></TR>
  <TR>
    <TD>35</TD>
    <TD>GO_FOR_POSITIONS</TD>
    <TD>DOUBLE</TD>
    <TD>Размер денежных средств, уплаченных под все открытые позиции на срочном 
      рынке</TD><TD>ГО поз.</TD></TR>
  <TR>
    <TD>36</TD>
    <TD>GO_FOR_ORDERS</TD>
    <TD>DOUBLE</TD>
    <TD>Оценка стоимости активов в заявках на срочном рынке</TD><TD>ГО       заяв.</TD></TR>
  <TR>
    <TD>37</TD>
    <TD>RATE_FUTURES</TD>
    <TD>DOUBLE</TD>
    <TD>Отношение ликвидационной стоимости портфеля к ГО по срочному 
      рынку</TD><TD>Активы/ГО</TD></TR>
  <TR>
    <TD>38</TD>
    <TD>IS_QUAL_CLIENT</TD>
    <TD>STRING</TD>
    <TD>Признак «квалифицированного» клиента, которому 
      разрешено кредитование заемными средствами с плечом 1:3. Возможные значения: «ПовышУрРиска» – квалифицированный, &lt;пусто&gt; – 
      нет</TD><TD>ПовышУрРиска</TD></TR>
<TR>
    <TD>39</TD>
    <TD>IS_FUTURES</TD>
    <TD>STRING</TD>
    <TD>Счет клиента на FORTS, в случае наличия 
      объединенной позиции, иначе поле остается пустым</TD><TD>Сроч. счет</TD></TR>
<TR>
    <TD>40</TD>
    <TD> CURR_TAG </TD>
    <TD>STRING</TD>
    <TD>Актуальные текущие параметры расчета для данной 
      строки в формате «&lt;Валюта&gt;-&lt;Идентификатор торговой сессии&gt;». 
      Пример: «SUR-EQTV»</TD><TD>Парам. расч.</TD></TR>
</TBODY></TABLE>
</P>
<DL>
<DD>(<SPAN class=mark>*</SPAN>) 
  Подробнее о коэффициентах дисконтирования см. п. 7 Руководства по администрированию «Настройки Библиотеки расчета лимитов».  </DD></DL>
<H3>Пример: </H3><PRE>‘<BR>GET_CLIENT_MARGINAL_PORTFOLIO_INFO ("NC0080000000", "1")<BR>‘</PRE>

<A name=subt3></A>
<H2>GET_CLIENT_MARGINAL_PORTFOLIO_INFO_EX</H2>
<P>Функция возвращает ассоциативный массив (MAP) с <A href="#subt5">параметрами</A> таблицы <A 
href="ch7_10.html">Клиентский портфель</A>, соответствующих идентификатору участника торгов «firmid», коду клиента «client_code» и&nbsp;сроку расчетов&nbsp;«limit_kind».</P>
<P class=defn>MAP&nbsp;GET_CLIENT_MARGINAL_PORTFOLIO_INFO_EX (STRING firmid, STRING 
client_code, DOUBLE limit_kind)</P>
<P>Возможные значения параметра «limit_kind»:
<UL>
  <LI>«0» – срок расчетов «Т0»;
  <LI>«1» – срок расчетов «Т1»;
  <LI>«2» – срок расчетов «Т2»;
  <LI>«365» – срок расчетов «Тx».</LI></UL>

<P>Дополнительно возвращаются следующие параметры: 
<P>
<TABLE>
<TR>
    <TH>№</TH>
    <TH>Параметр</TH>
    <TH>Тип</TH>
    <TH>Описание</TH>
    <TH>&nbsp;</TH></TR>
<TR>
    <TD>1</TD>
    <TD>INIT_MARGIN</TD>
    <TD>DOUBLE</TD>
    <TD>Значение начальной маржи. Заполняется для клиентов типа «МД»</TD>
    <TD>Нач.маржа</TD></TR>
<TR>
    <TD>2</TD>
    <TD>MIN_MARGIN</TD>
    <TD>DOUBLE</TD>
    <TD>Значение минимальной маржи. Заполняется для клиентов типа «МД»</TD>
    <TD>Мин.маржа</TD></TR>
<TR>
    <TD>3</TD>
    <TD>CORRECTED_MARGIN</TD>
    <TD>DOUBLE</TD>
    <TD>Значение скорректированной маржи. Заполняется для клиентов типа «МД»</TD>
    <TD>Скор.маржа</TD></TR>
<TR>
    <TD>4</TD>
    <TD>CLIENT_TYPE</TD>
    <TD>DOUBLE</TD>
    <TD>Тип клиента</TD>
    <TD>Тип клиента</TD></TR>
<TR>
    <TD>5</TD>
    <TD>PORTFOLIO_VALUE</TD>
    <TD>DOUBLE</TD>
    <TD>Стоимость портфеля. Для клиентов типа «МД» возвращается значение для строк с максимальным сроком расчетов limit_kind</TD>
    <TD>Стоимость портфеля</TD></TR>
 </TABLE></P>
<H3>Пример: </H3><PRE>‘<BR>GET_CLIENT_MARGINAL_PORTFOLIO_INFO_EX ("NC0080000000", "1", "0")<BR>‘</PRE>

<A name=subt2></A>
<H2>GET_CLIENT_MARGINAL_BUY_SELL_INFO</H2>
<P>Функция возвращает ассоциативный массив (MAP) с параметрами таблицы <A 
href="ch5_9.html">Купить/Продать</A>, означающими возможность купить либо 
продать указанный инструмент «sec_code» класса «class_code», указанным клиентом 
«client_code» фирмы «firmid», по указанной цене «price». Если цена равна «0», то 
используются лучшие значения спроса/предложения. </P>
<P class=defn>MAP&nbsp;GET_CLIENT_MARGINAL_BUY_SELL_INFO (STRING 
  firmid, STRING client_code, STRING class_code, STRING sec_code, DOUBLE 
  price)</P>
<A name=subt6></A>
<H3>Параметры: </H3>
<P>
<TABLE>
  <TBODY>
  <TR>
    <TH>№</TH>
    <TH>Параметр</TH>
    <TH>Тип</TH>
    <TH>Описание</TH></TR>
  <TR>
    <TD>1</TD>
    <TD>IS_MARGIN_SEC</TD>
    <TD>DOUBLE</TD>
    <TD>Признак маржинальности инструмента. Возможные значения: <BR>«1» – 
      маржинальная, «0» – не маржинальная.
      <BR>Не заполняется для клиентов типа «МД»</TD></TR>
  <TR>
    <TD>2</TD>
    <TD>IS_ASSET_SEC</TD>
    <TD>DOUBLE</TD>
    <TD>Принадлежность инструмента к списку инструментов, принимаемых в обеспечение. 
      Возможные значения: <BR>«1» – принимается в обеспечение, «0» – не 
      принимается в обеспечение.<BR>Не заполняется для клиентов типа «МД»</TD></TR>
  <TR>
    <TD>3</TD>
    <TD>BALANCE</TD>
    <TD>DOUBLE</TD>
    <TD>Текущая позиция по инструменту, в лотах </TD></TR>
  <TR>
    <TD>4</TD>
    <TD>CAN_BUY</TD>
    <TD>DOUBLE</TD>
    <TD>Оценка количества лотов, доступных на покупку по указанной цене <SPAN class=mark>*</SPAN></TD></TR>
  <TR>
    <TD>5</TD>
    <TD>CAN_SELL</TD>
    <TD>DOUBLE</TD>
    <TD>Оценка количества лотов, доступных на продажу по указанной цене <SPAN class=mark>*</SPAN></TD></TR>
  <TR>
    <TD>6</TD>
    <TD>POSITION_VALUATION</TD>
    <TD>DOUBLE</TD>
    <TD>Денежная оценка позиции по инструменту по ценам 
  спроса/предложения</TD></TR>
<tr>
  <td> 7  </td>
  <td>  VALUE  </td>
  <td>  DOUBLE  </td>
  <td>  Оценка  стоимости позиции по&nbsp;цене последней сделки  </td>
 </tr>
 <tr>
  <td>  8  </td>
  <td>  OPEN_VALUE  </td>
  <td>  DOUBLE  </td>
  <td>  Оценка  стоимости позиции клиента, рассчитанная по&nbsp;цене закрытия предыдущей торговой  сессии  </td>
 </tr>
 <tr>
  <td>  9  </td>
  <td>  LIM_LONG  </td>
  <td>  DOUBLE  </td>
  <td>  Предельный  размер позиции по&nbsp;данному инструменту, принимаемый в&nbsp;обеспечение  длинных позиций  </td> 
</tr>
 <tr>
  <td>  10  </td>
  <td>  LONG_COEF  </td>
  <td>  DOUBLE  </td>
  <td>  Коэффициент  дисконтирования, применяемый для длинных позиций по&nbsp;данному инструменту  </td>
 </tr>
 <tr>
  <td>  11  </td>
  <td>  LIM_SHORT  </td>
  <td>  DOUBLE  </td>
  <td>  Предельный  размер короткой позиции по&nbsp;данному инструменту  </td>
 </tr>
 <tr>
  <td>  12  </td>
  <td>  SHORT_COEF  </td>
  <td>  DOUBLE  </td>
  <td>  Коэффициент  дисконтирования, применяемый для коротких позиций по&nbsp;данному инструменту  </td>
 </tr>
 <tr>
  <td>  13  </td>
  <td>  VALUE_COEF  </td>
  <td>  DOUBLE  </td>
  <td>  Оценка  стоимости позиции по&nbsp;цене последней сделки, с&nbsp;учетом дисконтирующих  коэффициентов  </td>
 </tr>
 <tr>
  <td>  14  </td>
  <td>  OPEN_VALUE_COEF  </td>
  <td>  DOUBLE  </td>
  <td>  Оценка  стоимости позиции клиента, рассчитанная по&nbsp;цене закрытия предыдущей торговой
  сессии с&nbsp;учетом дисконтирующих коэффициентов  </td>
 </tr>
 <tr>
  <td>  15  </td>
  <td>  SHARE  </td>
  <td>  DOUBLE  </td>
  <td>  Процентное  отношение стоимости позиции по&nbsp;данному инструменту к стоимости всех
  активов клиента, рассчитанное по&nbsp;текущим ценам  </td>
 </tr>
 <tr>
  <td>  16  </td>
  <td>  SHORT_WA_PRICE  </td>
  <td>  DOUBLE  </td>
  <td>  Средневзвешенная  стоимость коротких позиций по&nbsp;инструментам  </td>
 </tr>
 <tr>
  <td>  17  </td>
  <td>  LONG_WA_PRICE  </td>
  <td>  DOUBLE  </td>
  <td>  Средневзвешенная  стоимость длинных позиций по&nbsp;инструментам  </td>
 </tr>
 <tr>
  <td>  18  </td>
  <td>  PROFIT_LOSS  </td>
  <td>  DOUBLE  </td>
  <td>  Разница между средневзвешенной ценой приобретения&nbsp;инструментов и&nbsp;их&nbsp;рыночной оценки  </td>
 </tr>
 <tr>
  <td>  19  </td>
  <td>  SPREAD_HC  </td>
  <td>  DOUBLE  </td>
  <td>  Коэффициент  корреляции между инструментами  </td>
 </tr>
 <tr>
  <td>  20  </td>
  <td>  CAN_BUY_OWN  </td>
  <td>  DOUBLE  </td>
  <td>  Максимально возможное количество инструментов в&nbsp;заявке на покупку этого  инструмента на этом
  классе на собственные средства клиента, исходя из&nbsp;лучшей цены предложения  </td>
 </tr>
 <tr>
  <td>  21  </td>
  <td>  CAN_SELL_OWN  </td>
  <td>  DOUBLE  </td>
  <td>  Максимально возможное количество инструментов в&nbsp;заявке на продажу этого
  инструмента на этом классе из&nbsp;собственных активов клиента, исходя  из&nbsp;лучшей цены спроса  </td>
 </tr>
 <tr>
  <td>  22  </td>
  <td>  IS_REST_SHORT_SEC</td>
  <td>  DOUBLE  </td>
  <td>  Признак того, является ли инструмент разрешенным для продажи на заемные средства. Возможные значения:
<BR>«1» – разрешена, «0» – не разрешена.
<BR>Не заполняется для клиентов типа «МД»  </td>
 </tr>
</TBODY></TABLE></P>
<DL>
  <DD>(<SPAN class=mark>*</SPAN>) В зависимости от настроек сервера 
  QUIK, величина может выражаться в лотах, либо в штуках. Уточните единицу 
  измерения у обслуживающего брокера. </DD></DL>

<H3>Пример: </H3><PRE>‘<BR>GET_CLIENT_MARGINAL_BUY_SELL_INFO ("NC0080000000", "1", "TQBR", "HYDR",0)<BR>‘<BR></PRE>

<A name=subt4></A>
<H2>GET_CLIENT_MARGINAL_BUY_SELL_INFO_EX</H2>
<P>Функция возвращает ассоциативный массив (MAP) с <A href="#subt6">параметрами</A> таблицы <A 
href="ch5_9.html">Купить/Продать</A>, означающими возможность купить либо 
продать указанный инструмент «sec_code» класса «class_code», указанным клиентом 
«client_code» фирмы «firmid», по указанной цене «price». Если цена равна «0», то 
используются лучшие значения спроса/предложения. </P>
<P class=defn>MAP&nbsp;GET_CLIENT_MARGINAL_BUY_SELL_INFO (STRING 
  firmid, STRING client_code, STRING class_code, STRING sec_code, DOUBLE 
  price)</P>
<P>Дополнительно возвращаются следующие параметры: 
<P>
<TABLE>
<TR>
    <TH>№</TH>
    <TH>Параметр</TH>
    <TH>Тип</TH>
    <TH>Описание</TH></TR>
<TR>
    <TD>1</TD>
    <TD>LIMIT_KIND</TD>
    <TD>DOUBLE</TD>
    <TD>Срок расчётов. Возможные значения: 
      <UL>
        <LI>«0» – «Т0»; 
        <LI>«1» – «Т1»;
        <LI>«2» – «Т2»</LI></UL></TD></TR>
<TR>
    <TD>2</TD>
    <TD>D_LONG</TD>
    <TD>DOUBLE</TD>
    <TD>Эффективный начальный дисконт для длинной позиции. Заполняется для клиентов типа «МД»<BR>Заполняется для клиентов типа «МД»</TD></TR>
<TR>
    <TD>3</TD>
    <TD>D_MIN_LONG</TD>
    <TD>DOUBLE</TD>
    <TD>Эффективный минимальный дисконт для длинной позиции. Заполняется для клиентов типа «МД» <BR>Заполняется для клиентов типа «МД»</TD></TR>
<TR>
    <TD>4</TD>
    <TD>D_SHORT</TD>
    <TD>DOUBLE</TD>
    <TD>Эффективный начальный дисконт для короткой позиции. Заполняется для клиентов типа «МД»</TD></TR>
<TR>
    <TD>5</TD>
    <TD>D_MIN_SHORT</TD>
    <TD>DOUBLE</TD>
    <TD>Эффективный минимальный дисконт для короткой позиции. Заполняется для клиентов типа «МД»</TD></TR>
<TR>
    <TD>6</TD>
    <TD>CLIENT_TYPE</TD>
    <TD>DOUBLE</TD>
    <TD>Тип клиента</TD></TR>
<TR>
    <TD>7</TD>
    <TD>IS_LONG_ALLOWED</TD>
    <TD>DOUBLE</TD>
    <TD>Признак того, является ли инструмент разрешенным для покупки на заемные средства. Возможные значения:
<BR>«1» – разрешена, «0» – не разрешена.
<BR>Заполняется для клиентов типа «МД»</TD></TR>
<TR>
    <TD>8</TD>
    <TD>IS_SHORT_ALLOWED</TD>
    <TD>DOUBLE</TD>
    <TD>Признак того, является ли инструмент разрешенным для продажи на заемные средства. Возможные значения:
<BR>«1» – разрешена, «0» – не разрешена.
<BR>Заполняется для клиентов типа «МД»</TD></TR>
 </TABLE></P>
<H3>Пример: </H3><PRE>‘<BR>GET_CLIENT_MARGINAL_BUY_SELL_INFO_EX ("NC0080000000", "1", "TQBR", "HYDR",0)<BR>‘<BR></PRE>

</FONT></P>

<P><DIV class=copyright>Руководство пользователя QUIK © ARQA Technologies / <A 
href="http://arqatech.com/ru/products/quik/" target="_blank">www.arqatech.com/ru/products/quik/ </A></DIV>
</body>
