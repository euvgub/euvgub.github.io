<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><title>‘ункци€ TRANS2QUIK_TRADE_STATUS_CALLBACK</title>
<META name=GENERATOR content="MSHTML 8.00.6001.18812">
<META content="text/html; charset=Windows-1251" http-equiv=Content-Type>

<STYLE type=text/css>

ADDRESS {font-style:normal;  padding-left: 20px; margin: 0px 0px 25pt 5pt; font-size: 9pt; color:#000000; font-style:normal; font-weight: normal; display:list-item; list-style-type:none; list-style-position: outside; list-style-image:url('template/icon-popup.gif');}

ADDRESS P {font-style:normal;  padding-left: 20px; margin: 0px 0px 5pt -15pt; font-size: 9pt; color:#000000; font-style:normal; font-weight: normal; display:list-item; list-style-type:none; list-style-position: outside; list-style-image:url('template/icon-popup.gif');}

MENU { font-size: 12pt; font-family:Verdana;  line-height:100%; margin:0px 0px 0px 20pt; list-style-type:none; list-style-position: outside; list-style-image:url('template/blt-link_black.gif'); }

BODY {font-family: Arial; font-size: 12pt; color:#000000; background-color: #fbfbfb; line-height: 1.3; margin:0pt 5pt 10pt 5pt;}

A {color: #16A9D3;}
P  {font-family:Arial; font-size:12pt; margin-top:0px; margin-bottom:12pt;}

IMG { margin:0pt 0pt 0pt auto; }

UL { font-family: Arial; font-size: 12pt; margin:12px 0px 12px 20px; list-style-type:disc; list-style-image:url('template/blt-li.gif'); } 
OL {font-family: Arial; font-size: 12pt; font-weight: bold; margin-top:12pt; margin-bottom:6pt; margin-left:20pt; type: bold;}
LI { margin-bottom: 8px; }
LI OL { margin-left: 25px; }
LI UL { margin-left: 25px; list-style-image:url('template/blt-link_black.gif'); }

SPAN {font-weight: normal;}

DD OL { font:12pt Verdana; font-style:normal; font-weight: bold; margin-left: 35px; }

H1 { font-size: 28pt; font-family:Verdana; color:#000000; font-style:normal; line-height:110%; margin-top:20pt; margin-bottom:26pt; text-decoration:none; font-weight: bold; margin-right:auto; margin-left:auto;}
H2 { font-size: 20pt; font-family:Verdana; color:#000000; font-style:normal; line-height:110%; margin-top:20pt; margin-bottom:6pt; text-decoration:none; font-weight: bold; margin-left:auto; padding: 0.5ex 0; }
H3 { font-size: 14pt; font-family:Verdana; color:#000000; font-style:normal; line-height:95%; margin-top:20pt; margin-bottom:6pt; margin-left: auto;}
H4 { font-size: 11pt; font-family:Verdana; color:#000000; font-style:normal; line-height:95%; margin-top:16pt; margin-bottom:6pt; margin-left: auto;}

TABLE { border-collapse: collapse; margin-bottom:20pt; }
TH { font-size: 10pt; border-top: none; border-bottom:#000000 3px solid; padding:15pt 5pt 5px 0px; color:#000000; font-family:Verdana; font-style:normal; font-weight: bold; text-align:left; }
TD { font-size:10pt; border-top: 0pt; font-family:Arial; border-bottom:#000000 1px solid; padding:4pt 5px 12pt 0px;  line-height:120%; }
TD P {font-family: Arial; font-size: 10pt; margin-top:6pt;}
TD.plain 	{margin:0px 0px 0px 0px; border-top: 0px; border-bottom:0px; padding:0px 0px 0px 0px; font-size:100%; line-height:100%;}
TD.array	{ border: 1px solid #D4D4D4; text-align: center; width: 90px;}
TD.pic	{ padding:0px 0px 0px 0px; }
TD.line1          { background-color:#000000; }
TD.line2          { background-color:#000000; }
TD UL {font-family: Arial; font-size: 10pt; margin:0px 0px 0px 20px; line-height:120%;}
TD UL LI {font-family: Arial; font-size: 10pt; margin-bottom: 0px; list-style-image:url('template/blt-link_black.gif');}

TD H4	{line-height: 100%; margin-top: 8px; margin-bottom: 0px;}

DL	{ padding-left:35px; margin-left: 30px; margin-bottom: 35px;}
DD	{ padding-left:8px; color:#000000; margin: 8px 8px 8px 0px; font:12pt Verdana; font-style:normal; font-weight: bold; border-left: #000000 4px solid; margin-bottom:18pt; }
DD P	{font:12pt Verdana; font-style:normal; font-weight: bold; }

PRE	{ background-color:#F2F2F2; margin-left: 35px; margin-bottom: 20px; border-style:none; border-top-style: none; border-bottom-style: none; padding:8px 8px 8px 8px; font: 10pt Courier New; line-height:160%;}

.title {display: inline; background:#FbFbFb; margin-left: 0px; border-style:solid; border-color:#D4D4D4; border-width: 1px 1px 0px 4px; padding:8px 8px 6px 12px; color:#19A788; font-weight:bold;}
.hlt { background:#FFFFFF; margin-left: 0px; border-style:solid; border-color:#D4D4D4; border-width: 1px 2px 1px 4px; padding:15px 8px 15px 46px;}

STRONG { font-weight: bold;}
.logo	{ position: relative; top:-45px; float: right; width: 100px; margin:10px 10px 10px 10px; }
.mark	{ font: 10pt Verdana; color: #5EB28E; }
.defn	{ font: 15px Trebuchet MS; margin:12px 0px 12px 50px; }
.copyright {font: 12pt Trebuchet MS; font-style:normal; color:#A2A2A2; margin-top: 50px;}
.comment	{ font-size: 10pt; font-family: Verdana; }
</STYLE>

<meta name=GENERATOR content="MSHTML 8.00.6001.18812"></head>

<body aLink=#19a788 link=#007cae vLink=#8d4194>
<H1 style="MARGIN-TOP: 10pt">‘ункци€ TRANS2QUIK_TRADE_STATUS_CALLBACK</H1>
<P><FONT size=2 face=Arial>
<P>‘ункци€ обратного вызова дл€ получени€ информации о сделке.</P>

<P class=defn>void__stdcall TRANS2QUIK_TRADE_STATUS_CALLBACK (long nMode, unsigned__int64 dNumber, unsigned__int64 dOrderNum, LPSTR lpstrClassCode, LPSTR lpstrSecCode, double dPrice, __int64 nQty, double dValue, long nIsSell, intptr_t nTradeDescriptor)</P>

<P>
<TABLE>
  <TBODY>
  <TR>
    <TH>ѕараметр</TH>
    <TH>ќписание</TH></TR>
  <TR>
    <TD>nMode</TD>
    <TD>“ип: Long. ѕризнак того, идет ли начальное получение сделок или 
      нет, возможные значени€: Ђ0ї Ц нова€ сделка, Ђ1ї - идет 
      начальное получение сделок, Ђ2ї Ц получена последн€€ сделка из 
      начальной рассылки</TD></TR>
  <TR>
    <TD>dNumber</TD>
    <TD>“ип: unsigned__int64. Ќомер сделки</TD></TR>
  <TR>
    <TD>dOrderNum</TD>
    <TD>“ип: unsigned__int64. Ќомер за€вки, породившей сделку</TD></TR>
  <TR>
    <TD>lpstrClassCode</TD>
    <TD>“ип: указатель на переменную типа —трока.  од класса</TD></TR>
  <TR>
    <TD>lpstrSecCode</TD>
    <TD>“ип: указатель на переменную типа —трока.  од инструмента</TD></TR>
  <TR>
    <TD>dPrice</TD>
    <TD>“ип: Double. ÷ена сделки</TD></TR>
  <TR>
    <TD>nQty</TD>
    <TD>“ип: __int64.  оличество сделки</TD></TR>
  <TR>
    <TD>nIsSell</TD>
    <TD>“ип: Long. Ќаправление сделки: Ђ0ї еcли Ђѕокупкаї, иначе 
  Ђѕродажаї</TD></TR>
  <TR>
    <TD>dValue</TD>
    <TD>“ип: Double. ќбъем сделки</TD></TR>
  <TR>
    <TD>nTradeDescriptor</TD>
    <TD>
      <P>“ип: intptr_t. ƒескриптор сделки, может использоватьс€ дл€ следующих 
      специальных функций в функции обратного вызова:</P>
      <UL>
        <LI><STRONG>long __stdcall TRANS2QUIK_TRADE_DATE (intptr_t nTradeDescriptor)</STRONG> Ц возвращает дату заключени€ сделки; 
        <LI><STRONG>long</STRONG><STRONG>__stdcall 
        </STRONG><STRONG>TRANS2QUIK_TRADE_SETTLE_DATE (intptr_t 
        nTradeDescriptor)</STRONG> Ц возвращает дату расчетов по сделке; 
        <LI><STRONG>long</STRONG><STRONG>__stdcall 
        </STRONG><STRONG>TRANS2QUIK_TRADE_TIME (intptr_t</STRONG> 
        <STRONG>nTradeDescriptor)</STRONG> Ц возвращает врем€ сделки; 
        <LI><STRONG>long</STRONG><STRONG>__stdcall 
        </STRONG><STRONG>TRANS2QUIK_TRADE_IS_MARGINAL (intptr_t</STRONG> 
        <STRONG>nTradeDescriptor)</STRONG> Ц возвращает признак маржинальности 
        сделки: Ђ0ї еcли Ђнемаржинальна€ї, иначе Ђмаржинальна€ї; 
        <LI><STRONG>LPSTR</STRONG><STRONG>__stdcall 
        </STRONG><STRONG>TRANS2QUIK_TRADE_CURRENCY (intptr_t</STRONG> 
        <STRONG>nTradeDescriptor)</STRONG> Ц возвращает валюту в которой торгуетс€ 
        инструмент сделки; 
        <LI><STRONG>LPSTR</STRONG><STRONG>__stdcall 
        </STRONG><STRONG>TRANS2QUIK_TRADE_SETTLE_CURRENCY (intptr_t</STRONG> 
        <STRONG>nTradeDescriptor)</STRONG> Ц возвращает валюту расчетов по сделке; 
        <LI><STRONG>LPSTR</STRONG><STRONG>__stdcall 
        </STRONG><STRONG>TRANS2QUIK_TRADE_SETTLE_CODE (intptr_t</STRONG> 
        <STRONG>nTradeDescriptor)</STRONG> Ц возвращает код расчетов по сделке; 
        <LI><STRONG>double</STRONG><STRONG>__stdcall 
        </STRONG><STRONG>TRANS2QUIK_TRADE_ACCRUED_INT (intptr_t</STRONG> 
        <STRONG>nTradeDescriptor)</STRONG> Ц возвращает накопленный купонный доход сделки; 
        <LI><STRONG>double</STRONG><STRONG>__stdcall 
        </STRONG><STRONG>TRANS2QUIK_TRADE_YIELD (intptr_t</STRONG> 
        <STRONG>nTradeDescriptor)</STRONG> Ц возвращает доходность сделки; 
        <LI><STRONG>LPSTR</STRONG><STRONG>__stdcall 
        </STRONG><STRONG>TRANS2QUIK_TRADE_USERID (intptr_t</STRONG> 
        <STRONG>nTradeDescriptor)</STRONG> Ц возвращает строковый идентификатор 
        трейдера, от&nbsp;имени которого заключена сделка; 
        <LI><STRONG>LPSTR</STRONG><STRONG>__stdcall 
        </STRONG><STRONG>TRANS2QUIK_TRADE_ACCOUNT (intptr_t</STRONG> 
        <STRONG>nTradeDescriptor)</STRONG> Ц возвращает торговый счет сделки; 
        <LI><STRONG>LPSTR</STRONG><STRONG>__stdcall 
        </STRONG><STRONG>TRANS2QUIK_TRADE_BROKERREF (intptr_t</STRONG> 
        <STRONG>nTradeDescriptor)</STRONG> Ц возвращает комментарий сделки; 
        <LI><STRONG>LPSTR</STRONG><STRONG>__stdcall 
        </STRONG><STRONG>TRANS2QUIK_TRADE_CLIENT_CODE (intptr_t</STRONG> 
        <STRONG>nTradeDescriptor)</STRONG> Ц возвращает код клиента сделки; 
        <LI><STRONG>LPSTR</STRONG><STRONG>__stdcall 
        </STRONG><STRONG>TRANS2QUIK_TRADE_FIRMID (intptr_t</STRONG> 
        <STRONG>nTradeDescriptor)</STRONG> Ц возвращает строковый идентификатор 
        организации пользовател€ сделки; 
        <LI><STRONG>LPSTR</STRONG><STRONG>__stdcall 
        </STRONG><STRONG>TRANS2QUIK_TRADE_PARTNER_FIRMID (intptr_t</STRONG> 
        <STRONG>nTradeDescriptor)</STRONG> Ц возвращает строковый идентификатор организации-партнера по сделке; 
        <LI><STRONG>double</STRONG><STRONG>__stdcall 
        </STRONG><STRONG>TRANS2QUIK_TRADE_TS_COMMISSION (intptr_t</STRONG> 
        <STRONG>nTradeDescriptor)</STRONG> Ц возвращает величину суммарной комиссии 
        по сделке; 
        <LI><STRONG>double</STRONG><STRONG>__stdcall 
        </STRONG><STRONG>TRANS2QUIK_TRADE_CLEARING_CENTER_COMMISSION 
        (intptr_t</STRONG> <STRONG>nTradeDescriptor)</STRONG> Ц возвращает величину комиссии за клиринг по сделке; 
        <LI><STRONG>double</STRONG><STRONG>__stdcall 
        </STRONG><STRONG>TRANS2QUIK_TRADE_EXCHANGE_COMMISSION (intptr_t</STRONG> 
        <STRONG>nTradeDescriptor)</STRONG> Ц возвращает величину комиссии за торги по сделке; 
        <LI><STRONG>double</STRONG><STRONG>__stdcall 
        </STRONG><STRONG>TRANS2QUIK_TRADE_TRADING_SYSTEM_COMMISSION 
        (intptr_t</STRONG> <STRONG>nTradeDescriptor)</STRONG> Ц возвращает величину комиссии за технический доступ по сделке; 
        <LI><STRONG>double;</STRONG><STRONG>__stdcall 
        </STRONG><STRONG>TRANS2QUIK_TRADE_PRICE2 (intptr_t</STRONG> 
        <STRONG>nTradeDescriptor)</STRONG> Ц возвращает цену выкупа; 
        <LI><STRONG>double</STRONG><STRONG>__stdcall 
        </STRONG><STRONG>TRANS2QUIK_TRADE_REPO_RATE (intptr_t</STRONG> 
        <STRONG>nTradeDescriptor)</STRONG> Ц возвращает ставку –≈ѕќ в процентах; 
        <LI><STRONG>double</STRONG><STRONG>__stdcall 
        </STRONG><STRONG>TRANS2QUIK_TRADE_REPO_VALUE (intptr_t</STRONG> 
        <STRONG>nTradeDescriptor)</STRONG> Ц возвращает сумму –≈ѕќ (сумма 
        привлеченных/<WBR>предоставленных по сделке –≈ѕќ денежных средств); 
        <LI><STRONG>double</STRONG><STRONG>__stdcall 
        </STRONG><STRONG>TRANS2QUIK_TRADE_REPO2_VALUE (intptr_t</STRONG> 
        <STRONG>nTradeDescriptor)</STRONG> Ц возвращает стоимость выкупа –≈ѕќ; 
        <LI><STRONG>double</STRONG><STRONG>__stdcall 
        </STRONG><STRONG>TRANS2QUIK_TRADE_ACCRUED_INT2 (intptr_t</STRONG> 
        <STRONG>nTradeDescriptor)</STRONG> Ц возвращает накопленный купонный доход при выкупе; 
        <LI><STRONG>long;</STRONG><STRONG>__stdcall 
        </STRONG><STRONG>TRANS2QUIK_TRADE_REPO_TERM (intptr_t</STRONG> 
        <STRONG>nTradeDescriptor)</STRONG> Ц возвращает срок –≈ѕќ в календарных дн€х; 
        <LI><STRONG>double</STRONG><STRONG>__stdcall 
        </STRONG><STRONG>TRANS2QUIK_TRADE_START_DISCOUNT (intptr_t</STRONG> 
        <STRONG>nTradeDescriptor)</STRONG> Ц возвращает начальный дисконт в процентах; 
        <LI><STRONG>double</STRONG><STRONG>__stdcall 
        </STRONG><STRONG>TRANS2QUIK_TRADE_LOWER_DISCOUNT (intptr_t</STRONG> 
        <STRONG>nTradeDescriptor)</STRONG> Ц возвращает нижний 
        предел дисконта в процентах;       
        <LI><STRONG>double</STRONG><STRONG>__stdcall 
        </STRONG><STRONG>TRANS2QUIK_TRADE_UPPER_DISCOUNT (intptr_t</STRONG> 
        <STRONG>nTradeDescriptor)</STRONG> Ц возвращает верхний предел дисконта в процентах; 
        <LI><STRONG>LPSTR </STRONG><STRONG>__stdcall 
        </STRONG><STRONG>TRANS2QUIK_TRADE_EXCHANGE_CODE (intptr_t</STRONG> 
        <STRONG>nTradeDescriptor)</STRONG> Ц возвращает строковый код биржи; 
        <LI><STRONG>LPSTR </STRONG><STRONG>__stdcall 
        </STRONG><STRONG>TRANS2QUIK_TRADE_STATION_ID (intptr_t</STRONG> 
        <STRONG>nTradeDescriptor)</STRONG> Ц возвращает строковый идентификатор рабочей станции; 
        <LI><STRONG>long </STRONG><STRONG>__stdcall 
        </STRONG><STRONG>TRANS2QUIK_TRADE_BLOCK_SECURITIES (intptr_t</STRONG> 
        <STRONG>nTradeDescriptor)</STRONG> Ц возвращает признак блокировки 
        финансового инструмента на специальном счете на врем€ операции –≈ѕќ: Ђ0ї еcли Ђне блокироватьї, иначе Ђблокироватьї;
        <LI><STRONG>long </STRONG><STRONG>__stdcall 
        </STRONG><STRONG>TRANS2QUIK_TRADE_PERIOD (intptr_t</STRONG> 
        <STRONG>nTradeDescriptor)</STRONG> Ц возвращает период, когда была совершена сделка; возможные значени€: Ђ0ї - Ђќткрытиеї, Ђ1ї - ЂЌормальныйї, Ђ2ї - Ђ«акрытиеї;
        <LI><STRONG>FILETIME </STRONG><STRONG>__stdcall 
        </STRONG><STRONG>TRANS2QUIK_TRADE_FILETIME (intptr_t</STRONG> 
        <STRONG>nTradeDescriptor)</STRONG>  Ц возвращает дату и врем€ заключени€ сделки в формате YY.MM.DD HH:MM:SS.MS;
        <LI><STRONG>long </STRONG><STRONG>__stdcall 
        </STRONG><STRONG>TRANS2QUIK_TRADE_DATE_TIME (intptr_t</STRONG> 
        <STRONG>nTradeDescriptor, long nTimeType)</STRONG>  Ц возвращает временные параметры сделки в зависимости от значени€ параметра nTimeType. ѕараметр nTimeType может принимать следующие значени€:
        <UL><LI>Ђ0ї - функци€ возвращает дату заключени€ сделки в формате YYYYMMDD,
                  <LI>Ђ1ї - функци€ возвращает врем€ заключени€ сделки в формате HHMMSS,
                  <LI>Ђ2ї - функци€ возвращает микросекунды времени заключени€ сделки, целое число от 0 до 999999;
         </LI></UL>
        <LI><STRONG>long </STRONG><STRONG>__stdcall 
        </STRONG><STRONG>TRANS2QUIK_TRADE_KIND (intptr_t</STRONG> 
        <STRONG>nTradeDescriptor)</STRONG>&nbsp; Ц возвращает вид сделки. ¬озможные значени€:
      <UL><LI>Ђ1ї - ќбычна€,
                <LI>Ђ2ї - јдресна€,
                <LI>Ђ3ї - ѕервичное размещение,
                <LI>Ђ4ї - ѕеревод денег / инструментов,
                <LI>Ђ5ї - јдресна€ сделка первой части –≈ѕќ,
                <LI>Ђ6ї - –асчетна€ по операции своп,
                <LI>Ђ7ї - –асчетна€ по внебиржевой операции своп,
                <LI>Ђ8ї - –асчетна€ сделка бивалютной корзины,
                <LI>Ђ9ї - –асчетна€ внебиржева€ сделка бивалютной корзины
         </LI></UL>
        <LI><STRONG>double	__stdcall TRANS2QUIK_TRADE_BROKER_COMMISSION (intptr_t nTradeDescriptor)</STRONG> Ц возвращает сумму комиссии брокера;
        <LI><STRONG>long	__stdcall TRANS2QUIK_TRADE_TRANSID (intptr_t nTradeDescriptor)</STRONG> Ц возвращает TRANS_ID за€вки, породившей сделку
</LI></UL></STRONG></STRONG></STRONG></STRONG></TD></TR></TBODY></TABLE></P>

<P> </P>
<P>—м. также:</P>
<UL>
  <LI><A href="ch6_11.html">‘ункции дл€ работы с транзакци€ми через API</A> 
  <LI><A href="ch6_9_19.html">ѕолучение информации о за€вках и 
сделках</A></LI></UL>
</FONT></P>

<P><DIV class=copyright>–уководство пользовател€ QUIK © ARQA Technologies / <A 
href="http://arqatech.com/ru/products/quik/" target="_blank">www.arqatech.com/ru/products/quik/ </A></DIV>
</body>
