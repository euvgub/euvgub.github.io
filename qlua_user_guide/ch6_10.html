<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><title>Импорт транзакций через API</title>
<META content="MSHTML 6.00.2900.5803" name=GENERATOR>
<META http-equiv=Content-Type content="text/html; charset=Windows-1251">

<STYLE type=text/css>

ADDRESS {font-style:normal;  padding-left: 20px; margin: 0px 0px 25pt 5pt; font-size: 9pt; color:#000000; font-style:normal; font-weight: normal; display:list-item; list-style-type:none; list-style-position: outside; list-style-image:url('template/icon-popup.gif');}

ADDRESS P {font-style:normal;  padding-left: 20px; margin: 0px 0px 5pt -15pt; font-size: 9pt; color:#000000; font-style:normal; font-weight: normal; display:list-item; list-style-type:none; list-style-position: outside; list-style-image:url('template/icon-popup.gif');}

MENU { font-size: 12pt; font-family:Verdana;  line-height:100%; margin:0px 0px 0px 20pt; list-style-type:none; list-style-position: outside; list-style-image:url('template/blt-link_black.gif'); }

BODY {font-family: Arial; font-size: 12pt; color:#000000; background-color: #fbfbfb; line-height: 1.3; margin:0pt 5pt 10pt 5pt;}

A {color: #16A9D3;}
P  {font-family:Arial; font-size:12pt; margin-top:0px; margin-bottom:12pt;}

IMG { margin:0pt 0pt 0pt auto; }

UL { font-family: Arial; font-size: 12pt; margin:12px 0px 12px 20px; list-style-type:disc; list-style-image:url('template/blt-li.gif'); } 
OL {font-family: Arial; font-size: 12pt; font-weight: bold; margin-top:12pt; margin-bottom:6pt; margin-left:20pt; type: bold;}
LI { margin-bottom: 8px; }
LI OL { margin-left: 25px; }
LI UL { margin-left: 25px; list-style-image:url('template/blt-link_black.gif'); }

SPAN {font-weight: normal;}

DD OL { font:12pt Verdana; font-style:normal; font-weight: bold; margin-left: 35px; }

H1 { font-size: 28pt; font-family:Verdana; color:#000000; font-style:normal; line-height:110%; margin-top:20pt; margin-bottom:26pt; text-decoration:none; font-weight: bold; margin-right:auto; margin-left:auto;}
H2 { font-size: 20pt; font-family:Verdana; color:#000000; font-style:normal; line-height:110%; margin-top:20pt; margin-bottom:6pt; text-decoration:none; font-weight: bold; margin-left:auto; padding: 0.5ex 0; }
H3 { font-size: 14pt; font-family:Verdana; color:#000000; font-style:normal; line-height:95%; margin-top:20pt; margin-bottom:6pt; margin-left: auto;}
H4 { font-size: 11pt; font-family:Verdana; color:#000000; font-style:normal; line-height:95%; margin-top:16pt; margin-bottom:6pt; margin-left: auto;}

TABLE { border-collapse: collapse; margin-bottom:20pt; }
TH { font-size: 10pt; border-top: none; border-bottom:#000000 3px solid; padding:15pt 5pt 5px 0px; color:#000000; font-family:Verdana; font-style:normal; font-weight: bold; text-align:left; }
TD { font-size:10pt; border-top: 0pt; font-family:Arial; border-bottom:#000000 1px solid; padding:4pt 5px 12pt 0px;  line-height:120%; }
TD P {font-family: Arial; font-size: 10pt; margin-top:6pt;}
TD.plain 	{margin:0px 0px 0px 0px; border-top: 0px; border-bottom:0px; padding:0px 0px 0px 0px; font-size:100%; line-height:100%;}
TD.array	{ border: 1px solid #D4D4D4; text-align: center; width: 90px;}
TD.pic	{ padding:0px 0px 0px 0px; }
TD.line1          { background-color:#000000; }
TD.line2          { background-color:#000000; }
TD UL {font-family: Arial; font-size: 10pt; margin:0px 0px 0px 20px; line-height:120%;}
TD UL LI {font-family: Arial; font-size: 10pt; margin-bottom: 0px; list-style-image:url('template/blt-link_black.gif');}

TD H4	{line-height: 100%; margin-top: 8px; margin-bottom: 0px;}

DL	{ padding-left:35px; margin-left: 30px; margin-bottom: 35px;}
DD	{ padding-left:8px; color:#000000; margin: 8px 8px 8px 0px; font:12pt Verdana; font-style:normal; font-weight: bold; border-left: #000000 4px solid; margin-bottom:18pt; }
DD P	{font:12pt Verdana; font-style:normal; font-weight: bold; }

PRE	{ background-color:#F2F2F2; margin-left: 35px; margin-bottom: 20px; border-style:none; border-top-style: none; border-bottom-style: none; padding:8px 8px 8px 8px; font: 10pt Courier New; line-height:160%;}

.title {display: inline; background:#FbFbFb; margin-left: 0px; border-style:solid; border-color:#D4D4D4; border-width: 1px 1px 0px 4px; padding:8px 8px 6px 12px; color:#19A788; font-weight:bold;}
.hlt { background:#FFFFFF; margin-left: 0px; border-style:solid; border-color:#D4D4D4; border-width: 1px 2px 1px 4px; padding:15px 8px 15px 46px;}

STRONG { font-weight: bold;}
.logo	{ position: relative; top:-45px; float: right; width: 100px; margin:10px 10px 10px 10px; }
.mark	{ font: 10pt Verdana; color: #5EB28E; }
.defn	{ font: 15px Trebuchet MS; margin:12px 0px 12px 50px; }
.copyright {font: 12pt Trebuchet MS; font-style:normal; color:#A2A2A2; margin-top: 50px;}
.comment	{ font-size: 10pt; font-family: Verdana; }
</STYLE>

<meta name=GENERATOR content="MSHTML 8.00.6001.18812"></head>
<body aLink=#19a788 link=#007cae vLink=#8d4194>
<H1 style="MARGIN-TOP: 10pt">Импорт транзакций через API</H1>
<P><FONT size=2 face=Arial>
<ADDRESS>меню <STRONG>Сервисы / Экспорт/импорт данных / Внешние транзакции…</STRONG> </ADDRESS>
<MENU>
  <LI><A href="#subt1">Назначение</A> 
  <LI><A href="#subt2">Настройки</A> </LI></MENU>

<P> </P>
<A name=subt1></A>
<H2>Назначение </H2>
<P>Данный функционал предназначен для отправки транзакций, подготовленных 
программой клиента. Функционал реализован в виде библиотеки 
<STRONG>Trans2QUIK.dll</STRONG>. Библиотека содержит в себе функции, описание 
которых приводится ниже, при вызове которых можно:</P>
<OL>
  <LI><SPAN>Установить или разорвать связь между терминалом QUIK и библиотекой 
  <STRONG>Trans2QUIK.dll</STRONG>. </SPAN>
  <LI><SPAN>Проверить наличие соединения между терминалом QUIK и 
  библиотекой <STRONG>Trans2QUIK.dll</STRONG> и между терминалом QUIK и 
  сервером QUIK. </SPAN>
  <LI><SPAN>Отправить транзакцию. </SPAN>
  <LI><SPAN>Получить информацию по заявкам и сделкам.</SPAN></LI></OL>
<P>Существует два способа передачи транзакций – синхронный и асинхронный, 
которые реализуются отдельными функциями:</P>
<OL>
  <LI><SPAN>При синхронной передаче транзакций выход из функции осуществляется только 
  после получения ответа от сервера QUIK. Следовательно, отправлять синхронные 
  транзакции можно только последовательно, дожидаясь ответа о каждой 
  отправленной транзакции – этот способ проще и более подходит для программистов 
  с небольшим опытом разработки программ. </SPAN>
  <LI><SPAN>При асинхронной передаче транзакций выход из функции 
  осуществляется сразу же. Для получения ответа об отправленных асинхронных 
  транзакциях используется функция обратного вызова (callback). Функция вызывается при 
  каждом получении ответа об исполненной или отвергнутой транзакции. Значения статусов 
  исполнения транзакции, которые возвращаются в функции обратного вызова, 
  приведены в описании к тем же статусам, которые используются при отправке 
  транзакций через файл. Подробнее см.&nbsp;<A href="ch6_8.html">Импорт 
  транзакций</A>.</SPAN></LI></OL>
<P>Также предусмотрена функция обратного вызова для контроля за соединениями 
между терминалом QUIK и библиотекой <STRONG>Trans2QUIK.dll</STRONG> и между 
Рабочим местом QUIK и сервером QUIK.</P>
<P>Описание транзакций при импорте через API аналогично описанию транзакций при 
импорте через файл. Подробнее см. <A href="ch6_8.html">Импорт 
транзакций</A>. Исключением являются следующие типы транзакций, которые не 
поддерживаются библиотекой <STRONG>Trans2QUIK.dll</STRONG>:</P>
<UL>
  <LI>«KILL_ALL_ORDERS» – снять все заявки из торговой системы, 
  <LI>«KILL_ALL_STOP_ORDERS» – снять все стоп-заявки, 
  <LI>«KILL_ALL_NEG_DEALS» – снять все заявки на 
  внебиржевые сделки и заявки на сделки РЕПО.</LI></UL>
<P>Для получения информации о заявках и сделках пользователь сначала должен 
сформировать список получаемых инструментов, раздельно для заявок и сделок. 
Затем выполняется запуск процедуры получения информации с помощью функций 
обратного вызова. При прекращении получения информации по заявкам и сделкам 
очищаются списки получаемых инструментов. Подробное описание см. <A 
href="ch6_9_19.html">Получение информации о заявках и сделках</A>.

<A name=subt2></A> 
<H2>Настройки </H2>
<P>Настройка импорта транзакции через API осуществляется в диалоге «Обработка 
внешних транзакций» (меню <STRONG>Сервисы / Экспорт/импорт данных / Внешние транзакции…</STRONG>).</P>

<P><IMG src="new80.gif"></P>

<P>Обработка внешних транзакций начинается после нажатия на кнопку «Начать 
обработку».</P>
<P>При установленном флажке «Запускать процесс обработки внешних 
транзакций автоматически» сервис обработки внешних транзакций запускается 
автоматически при загрузке Рабочего места QUIK. 
<P>Статистика по полученным и отправленным транзакциям отображается в полях 
«Число полученных внешних транзакций» и «Число транзакций, отправленных на 
сервер».</P>

<P> </P>
<P>См. также:</P>
<UL>
  <LI><A href="ch6_11.html">Функции для работы с транзакциями через API</A> 
  <LI><A href="ch6_9_19.html">Получение информации о заявках и 
сделках</A></LI></UL>
</FONT></P>

<P><DIV class=copyright>Руководство пользователя QUIK © ARQA Technologies / <A 
href="http://arqatech.com/ru/products/quik/" target="_blank">www.arqatech.com/ru/products/quik/ </A></DIV>
</body>